(function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("64a9"),r=n.n(o);r.a},"073c":function(e,t,n){"use strict";var o=n("c2cb"),r=n.n(o);r.a},"11a8":function(e,t,n){e.exports=n.p+"img/netcore.db562ad4.png"},2289:function(e,t,n){e.exports=n.p+"img/vuejs.82b9c7a5.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:"",id:"app"}},[n("b-row",[n("b-col",[n("nav-main")],1)],1),n("b-row",[n("b-col",[n("router-view",{attrs:{name:"main"}})],1)],1)],1)},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{toggleable:"sm",type:"dark",variant:"primary"}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{"exact-active-class":"active",to:{name:"Home"}}},[e._v("Home")]),n("b-nav-item",{attrs:{"exact-active-class":"active",active:e.$route.path.includes("Database"),to:{name:"RouteForList",params:{title:e.titleForList}}}},[e._v("Database")]),n("b-nav-item",{attrs:{"exact-active-class":"active",to:{name:"BlogPosts"}}},[e._v("Blog")]),n("b-nav-item",{attrs:{"exact-active-class":"active",to:{name:"About"}}},[e._v("About")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-form",[n("b-button",{attrs:{"exact-active-class":"active",variant:"primary"},on:{click:function(t){return e.toggleLogin()}}},[e._v(e._s(e.$AuthService.toggleLoginText.value))])],1)],1)],1)},s=[],l=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("bd86")),c=(n("20d6"),n("0d6d"),n("bc3a")),u=n.n(c),d=n("750b"),p=n("d225"),f=n("b0b4"),v=function(){function e(t){Object(p["a"])(this,e),this.schema=t}return Object(f["a"])(e,[{key:"editFields",value:function(){return this.schema?this.schema.Props.filter(function(e){var t=e.Hidden;return!t}):null}},{key:"label",value:function(e){return"bool"===e.Type?"":null===e.Title?e.Name:e.Title}},{key:"labelForCheckBox",value:function(e){return"bool"!==e.Type?"":null===e.Title?e.Name:e.Title}},{key:"invalidFeedback",value:function(e,t){if(!0===this.state(e,t))return"";if(!0===e.Required&&(null===t||void 0===t||0===t.length))return"The field is required";if(!0===e.Required&&"enum"===e.Type&&void 0===e.PropEnums.find(function(e){var n=e.value;return n===t}))return"The field is required";if("number"===e.Type){if(null!==e.Max&&(null===t||void 0===t||t>e.Max)||null!==e.Min&&(null===t||void 0===t||t<e.Min))return"Enter value between ".concat(e.Min," and ").concat(e.Max);if(isNaN(t))return"Enter a valid number"}return"text"===e.Type&&(null!==e.MaxLength&&(null===t||void 0===t||t.length>e.MaxLength)||null!==e.MinLength&&(null===t||void 0===t||t.length<e.MinLength))?"Text should contain between ".concat(e.MinLength," and ").concat(e.MaxLength," characters"):""}},{key:"state",value:function(e,t){if(!1===e.Required&&!t)return!0;if(!0===e.Required&&"enum"===e.Type&&void 0===e.PropEnums.find(function(e){var n=e.value;return n===t}))return!1;if(!0===e.Required&&(null===t||void 0===t||0===t.length))return!1;if("number"===e.Type){if(null!==e.Max&&(null===t||void 0===t||t>e.Max)||null!==e.Min&&(null===t||void 0===t||t<e.Min))return!1;if(isNaN(t))return!1}return"text"!==e.Type||!(null!==e.MaxLength&&(null===t||void 0===t||t.length>e.MaxLength)||null!==e.MinLength&&(null===t||void 0===t||t.length<e.MinLength))}},{key:"isValidState",value:function(e){var t=this;return this.schema.Props.filter(function(e){var t=e.Hidden;return!t}).every(function(n){return!0===t.state(n,e[n.Name])})}},{key:"isNumeric",value:function(e){return"number"===e.Type}}]),e}(),m=n("2ef0"),g=(n("96cf"),n("3b8d")),b=n("7618");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){Object(l["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=function(e){if(e.response){var t="string"===typeof e.response.data.title||e.response.data.title instanceof String?e.response.data.title:"",n="string"===typeof e.response.data||e.response.data instanceof String?e.response.data:t;return"Operation failed. The server responded with error ".concat(e.response.status,". ").concat(n)}return e.request?"Operation failed. The server did not respond":"Operation failed, reason ".concat(e.message)};function w(e){if(!e)throw new Error("[usePromise]: 1st argument is required (must be a function)");if("function"!==typeof e)throw new Error("[usePromise]: argument has to be function, but received ".concat(Object(b["a"])(e)));var t,n=Object(d["f"])({loading:!1,error:null,result:null}),o=function(){var o=Object(g["a"])(regeneratorRuntime.mark(function o(){var r,a,i=arguments;return regeneratorRuntime.wrap(function(o){while(1)switch(o.prev=o.next){case 0:return n.error=null,n.loading=!0,r=t=e.apply(void 0,i),o.prev=3,o.next=6,r;case 6:a=o.sent,t===r&&(n.result=a),o.next=13;break;case 10:o.prev=10,o.t0=o["catch"](3),n.error=x(o.t0);case 13:return o.prev=13,n.loading=!1,o.finish(13);case 16:case"end":return o.stop()}},o,null,[[3,10,13,16]])}));return function(){return o.apply(this,arguments)}}();return y({},Object(d["h"])(n),{use:o})}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach(function(t){Object(l["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j="https://vuewithnetcore.azurewebsites.net/api/CRUD",I=Object.freeze([{GetList:"GetPeople",GetSingle:"GetPerson",Put:"PutPerson",Post:"PostPerson",Delete:"DeletePerson",TitleForList:"People",TitleForSingle:"Person"},{GetList:"GetBooks",GetSingle:"GetBook",Put:"PutBook",Post:"PostBook",Delete:"DeleteBook",TitleForList:"Books",TitleForSingle:"Book"},{GetList:"GetMovies",GetSingle:"GetMovie",Put:"PutMovie",Post:"PostMovie",Delete:"DeleteMovie",TitleForList:"Movies",TitleForSingle:"Movie"}]),L=function(e){var t=Object(d["a"])({get:function(){return e.root.$store.state.apiIndex&&e.root.$store.state.apiIndex>=0?e.root.$store.state.apiIndex:0},set:function(t){e.root.$store.commit("setApiIndex",t)}}),n=function(e){return I.findIndex(function(t){return t.TitleForList===e})},o=Object(d["a"])(function(){return I.map(function(e){return e.TitleForList})}),r=Object(d["a"])(function(){return I[t.value].TitleForList}),a=function(e){return I[e].TitleForSingle};return{apiIndex:t,apiIndexFromTitle:n,dtoList:o,titleForList:r,titleForSingle:a}},T=function(e){var t=Object(d["f"])({dto:null,schematool:null,copydto:null}),n=function(e,t){var n="".concat(j,"/").concat(I[e].GetSingle,"/").concat(t);return console.log("Axios.get, endpoint:",n,"apiIndex:",e),u.a.get(n)},o=function(e,t){var n="".concat(j,"/").concat(I[e].Post);return console.log("Axios.post, endpoint:",n,"apiIndex:",e),u.a.post(n,t)},r=function(e,t){var n="".concat(j,"/").concat(I[e].Put,"/").concat(t.Id);return console.log("Axios.put, endpoint:",n,"apiIndex:",e,"dto:",t),u.a.put(n,t)},a=w(n),i=a.loading,s=a.error,l=a.result,c=a.use,p=L(e),f=p.apiIndex,g=p.apiIndexFromTitle,b=p.titleForSingle;Object(d["i"])(l,function(e){e&&(t.schematool=new v(e.data.schema),t.dto=e.data.data||{},t.copydto=Object(m["cloneDeep"])(t.dto))});var h=Object(d["a"])(function(){return t.schematool.editFields()});return k({loading:i,error:s,use:c},Object(d["h"])(t),{post:o,put:r,editFields:h,titleForSingle:b,apiIndex:f,apiIndexFromTitle:g})},_=function(e){var t=Object(d["f"])({dtos:null,schema:null}),n=function(e){var t="".concat(j,"/").concat(I[e].GetList);return console.log("Axios.get, endpoint:",t,"apiIndex:",e),u.a.get(t)},o=L(e),r=o.apiIndex,a=o.apiIndexFromTitle,i=o.dtoList,s=o.titleForList,l=w(n),c=l.loading,p=l.error,f=l.result,v=l.use;Object(d["i"])(f,function(e){e&&(t.dtos=e.data.data,t.schema=e.data.schema)});var m=Object(d["a"])(function(){return Array.isArray(t.dtos)&&t.length&&Array.isArray(t.schema.Props)&&t.schema.Props.length?t.schema.Props.map(function(e){return{key:e.Name,label:e.Title}}):[]}),g=Object(d["a"])(function(){return I[r.value].TitleForSingle}),b=function(e){var n=t.dtos.find(function(t){return t.Id===e});return void 0!==n?n.Name:"?"},h=function(e,t,n){var o="".concat(j,"/").concat(I[e].Delete,"/").concat(t);return console.log("Axios.delete, endpoint:",o,"apiIndex:",e),u.a.delete(o,{headers:{Authorization:"Bearer ".concat(n)}})};return k({},Object(d["h"])(t),{loading:c,error:p,use:v,apiIndex:r,apiIndexFromTitle:a,fields:m,dtoName:b,dtoList:i,titleForSingle:g,titleForList:s,deleteDto:h})},P={name:"NavMain",props:{},setup:function(e,t){var n=L(t),o=n.titleForList,r=function(){t.root.$AuthService.toggleLogin(t.root).then(function(e){t.root.$toasted.show(e,{type:"success",duration:3e3})}).catch(function(e){t.root.$toasted.show(e.message,{type:"error",duration:5e3})})};return t.root.$AuthService.checkLoggedIn(t.root),{toggleLogin:r,titleForList:o}}},F=P,S=n("2877"),A=Object(S["a"])(F,i,s,!1,null,null,null),C=A.exports,$={name:"App",components:{NavMain:C}},M=$,E=(n("034f"),Object(S["a"])(M,r,a,!1,null,null,null)),N=E.exports,D=(n("c5f6"),n("8c4f")),R=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("br"),o("b-card-group",{attrs:{deck:""}},[o("b-card",{attrs:{title:"Frontend","sub-title":"Vue.js","img-src":n("2289"),"img-alt":"Frontend","img-top":""}},[o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        The frontend is developed in Visual Studio Code using Vue single file components, Vue 3 composition api, \r\n        Vuex and Vue-router. For the UI, Bootstrapvue, Vue-font-awesome and vue-toasted libraries are used.\r\n        Axios handles the webapi calls.\r\n      ")]),o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        Msal.js library is used to implement OAuth 2.0 / OpenID Connect standards to sign in to Azure B2C, \r\n        from where jwt id and access tokens are obtained and used to gain access to the backend webapi.\r\n      ")]),o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        Grid columns and form fields are dynamically created based on schema received from the backend. \r\n        There is only one grid view and Add/Edit view for all three entity types. The views are customized by using the schema.\r\n      ")])],1),o("b-card",{attrs:{title:"Backend","sub-title":".NET Core 3","img-src":n("11a8"),"img-alt":"Backend","img-top":""}},[o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        The backend is developed in Visual Studio 2019 using .Net Core 3 WebApi.\r\n        EntityFrameWork Core is used for object/relational mapping. \r\n        EF Core code first approach generates the database creation scripts for SQL Server database.\r\n        AutoMapper handles mappings between dto and datamodel classes. \r\n      ")]),o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        The backend uses jwt token authentication to protect the delete endpoints. Other endpoints (get, put, post) are public for testing purposes.\r\n      ")]),o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        Backend uses reflection and attributes to generate a schema describing the object properties.\r\n        The schema is passed to the frontend, which uses it to generate the UI.\r\n      ")])],1),o("b-card",{attrs:{title:"Hosting","sub-title":"Microsoft Azure","img-src":n("c680"),"img-alt":"Hosting","img-top":""}},[o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        Both frontend and backend are hosted in the same Microsoft Azure AppService. \r\n        The database is an Azure Sql database. IIS has rewrite rules for SPA. \r\n      ")]),o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        Both frontend and backend are registered applications in Azure AD B2C.\r\n        The backend exposes an api and the frontend is granted access for the api.\r\n        Google is set up as an external identity provider or the user can sign up with a verified e-mail account.\r\n      ")]),o("b-card-text",{attrs:{align:"left"}},[e._v("\r\n        Microsoft Devops is used for deploying the application to Azure.\r\n        GIT is used for version control. I have put the sources to GitHub. \r\n        Check out the "),o("b-link",{attrs:{href:"https://github.com/anttijs/vue-to-netcore-webapi-with-msal-js",target:"_blank"}},[e._v("frontend")]),e._v("\r\n        and the "),o("b-link",{attrs:{href:"https://github.com/anttijs/schemagenerator",target:"_blank"}},[e._v("backend.")])],1)],1)],1)],1)},B=[],q={name:"Home",components:{}},G=q,z=(n("073c"),Object(S["a"])(G,R,B,!1,null,"5025bbcc",null)),H=z.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("br"),n("b-row",[n("b-col",[n("b-card",{attrs:{title:"About me",align:"left"}},[n("b-card-text",{attrs:{align:"left"}},[e._v("\n          I'm a "+e._s(e.profession)+" working as a private IT-consultant. \n          I have worked for "+e._s(e.years)+" years in software development and have experience with\n          Javascript, Jquery, .Net Core, EF Core, mySQL and SQL Server. I mainly work with C# and C++. \n        ")]),n("b-card-text",{attrs:{align:"left"}},[e._v("\n          I have studied Information Systems Science and graduated as a Master of Science in Economics from the University of Jyväskylä. \n          You can contact me at "),n("a",{attrs:{href:e.emailLink}},[e._v(e._s(e.email))])])],1)],1)],1)],1)},V=[],Y={name:"About",setup:function(){var e=Object(d["g"])("Full stack developer"),t=Object(d["g"])("antti.stoor@hotmail.com"),n=Object(d["a"])(function(){return"mailto:"+t.value}),o=Object(d["a"])(function(){return(new Date).getFullYear()-1994});return{profession:e,email:t,emailLink:n,years:o}}},J=Y,K=Object(S["a"])(J,U,V,!1,null,null,null),Q=K.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{sm:"1","align-self":"end"}},[n("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.click.blur",value:"Add new "+e.titleForSingle.toLowerCase(),expression:"'Add new ' + titleForSingle.toLowerCase() ",modifiers:{hover:!0,top:!0,click:!0,blur:!0}}],attrs:{to:{name:"RouteForSingle",params:{id:-1,title:e.titleForList}}}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add\n        ")],1)],1),n("b-col",{staticClass:"align-left",attrs:{sm:"11"}},[n("h2",[e._v(e._s(e.titleForList))])])],1)],1),e.loading?n("b-alert",{attrs:{show:"",variant:"primary"}},[n("b-spinner",{attrs:{small:"",variant:"primary",label:"Spinning"}}),e._v("  Loading data, please wait...")],1):e.error?n("b-alert",{attrs:{show:"",variant:"primary"}},[e._v("Failed to load data")]):!e.error&&e.dtos&&e.schema?[n("b-table",{ref:"table",attrs:{striped:"",hover:"",items:e.dtos,fields:e.fields},scopedSlots:e._u([{key:"table-colgroup",fn:function(e){return[n("col",{style:{width:"80px",whiteSpace:"nowrap"}})]}},{key:"cell(Id)",fn:function(t){return[n("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.click.blur",value:e.editTooltipText(t.item.Id),expression:"editTooltipText(row.item.Id)",modifiers:{hover:!0,top:!0,click:!0,blur:!0}}],attrs:{to:{name:"RouteForSingle",params:{id:t.item.Id,title:e.titleForList}}}},[n("font-awesome-icon",{attrs:{icon:"edit"}})],1),e._v("\n       \n      "),n("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.click.blur",value:e.deleteTooltipText(t.item.Id),expression:"deleteTooltipText(row.item.Id)",modifiers:{hover:!0,top:!0,click:!0,blur:!0}}],on:{click:function(n){return e.onDelete(t.item.Id)}}},[n("font-awesome-icon",{attrs:{icon:"trash"}})],1)]}}])})]:e._e()],2)},X=[],Z={name:"ListDto",props:{},setup(e,t){const{dtos:n,schema:o,loading:r,error:a,use:i,apiIndex:s,apiIndexFromTitle:l,fields:c,dtoName:u,dtoList:p,titleForSingle:f,titleForList:v,deleteDto:m}=_(t);Object(d["i"])(s,e=>{i(e)}),Object(d["i"])(a,e=>{e&&t.root.$toasted.show(e,{type:"error",duration:5e3})});const g=e=>{try{return`Delete ${f.value.toLowerCase()} ${u(e)}`}catch(a){return console.log(a),"?"}},b=e=>{try{return`Edit ${f.value.toLowerCase()} ${u(e)}`}catch(a){return console.log(a),"?"}},h=e=>{t.root.$AuthService.ensureLoggedIn(t.root).then(()=>{const n=`Are you sure you want to delete information about ${f.value.toLowerCase()} ${u(e)}`;t.root.$bvModal.msgBoxConfirm(n,{title:"Confirmation"}).then(t=>{!0===t&&k(s.value,e)}).catch(e=>{console.log(e)})}).catch(e=>{t.root.$toasted.show(e.message,{type:"error",duration:5e3})})},{error:y,result:x,use:O}=w(m),k=(e,n)=>{t.root.$AuthService.getToken(t.root).then(t=>{O(e,n,t.accessToken)})};return Object(d["i"])(x,e=>{console.log("result2",e),e&&(t.root.$toasted.show(e.data,{type:"success",duration:3e3}),i(s.value))}),Object(d["i"])(y,e=>{console.log("error2",e),e&&t.root.$toasted.show(e,{type:"error",duration:5e3})}),{dtos:n,schema:o,loading:r,error:a,fields:c,dtoName:u,dtoList:p,titleForSingle:f,titleForList:v,deleteTooltipText:g,editTooltipText:b,apiIndex:s,apiIndexFromTitle:l,onDelete:h}},beforeRouteUpdate(e,t,n){this&&(this.apiIndex=this.apiIndexFromTitle(e.params.title)),n()},beforeRouteEnter(e,t,n){n(t=>t.apiIndex=t.apiIndexFromTitle(e.params.title))}},ee=Z,te=Object(S["a"])(ee,W,X,!1,null,null,null),ne=te.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("h2",[e._v(e._s(e.formTitle()))]),n("br"),e.loading?n("b-alert",{attrs:{show:"",variant:"primary"}},[n("b-spinner",{attrs:{small:"",variant:"primary",label:"Spinning"}}),e._v("  Loading data, please wait...")],1):e.error?n("b-alert",{attrs:{show:"",variant:"primary"}},[e._v("Failed to load data")]):e.dto&&e.schematool?[n("form",{attrs:{id:"submitForm"},on:{submit:e.onOK}},[n("b-container",{attrs:{align:"left"}},[e._l(e.editFields,function(t){return n("div",{key:t.Id},[n("b-form-group",{attrs:{id:t.Id,label:e.schematool.label(t),"label-for":t.Id,"label-align":"right","label-cols":"3","invalid-feedback":e.invalidFeedback(t,e.dto[t.Name]),"valid-feedback":e.validFeedback(),state:e.getState(t,e.dto[t.Name])}},["enum"===t.Type?[n("b-form-select",{attrs:{id:t.Id,state:e.getState(t,e.dto[t.Name]),options:t.PropEnums},model:{value:e.dto[t.Name],callback:function(n){e.$set(e.dto,t.Name,n)},expression:"dto[item.Name]"}})]:"bool"===t.Type?[n("b-form-checkbox",{attrs:{id:t.Id,state:e.getState(t,e.dto[t.Name])},model:{value:e.dto[t.Name],callback:function(n){e.$set(e.dto,t.Name,n)},expression:"dto[item.Name]"}},[e._v("\n                "+e._s(e.schematool.labelForCheckBox(t))+"\n              ")])]:[n("b-form-input",{attrs:{id:t.Id,state:e.getState(t,e.dto[t.Name]),type:t.InputType,number:e.schematool.isNumeric(t),pattern:t.Pattern},model:{value:e.dto[t.Name],callback:function(n){e.$set(e.dto,t.Name,n)},expression:"dto[item.Name]"}})]],2)],1)}),n("b-row",{staticClass:"my-1"},[n("b-col",{attrs:{sm:"8","align-self":"end"}}),n("b-col",{attrs:{sm:"2","align-self":"end"}},[n("b-button",{attrs:{type:"submit",block:"",variant:"primary"}},[e._v("OK")])],1),n("b-col",{attrs:{sm:"2","align-self":"end"}},[n("b-button",{attrs:{block:"",variant:"light"},on:{click:e.onCancel}},[e._v("Cancel")])],1)],1)],2)],1)]:e._e()],2)},re=[],ae=n("768b"),ie={name:"EditDto",props:{id:Number,title:String},setup:function(e,t){var n=Object(d["g"])(!1),o=T(t),r=o.loading,a=o.error,i=o.use,s=o.dto,l=o.schematool,c=o.copydto,u=o.post,p=o.put,f=o.editFields,v=o.titleForSingle,g=o.apiIndex,b=o.apiIndexFromTitle,h=function(){return e.id};Object(d["i"])([g,h],function(e){var t=Object(ae["a"])(e,2),n=t[0],o=t[1];i(n,o)}),Object(d["i"])(a,function(e){e&&t.root.$toasted.show(e,{type:"error",duration:5e3})});var y=function(){var t=-1===e.id?"Add":"Edit";return"".concat(t," ").concat(v(g.value).toLowerCase())},x=function(){return""},O=function(e,t){return!1===n.value?"":l.value.invalidFeedback(e,t)},k=function(e,t){return!1===n.value?null:l.value.state(e,t)},j=w(-1===e.id?u:p),I=j.error,L=j.result,_=j.use,P=function(o){if(o.preventDefault(),n.value=!0,Object(m["isEqual"])(s.value,c.value)&&-1!==e.id)return t.root.$toasted.show("No changes where made.",{type:"success",duration:3e3}),void t.root.$router.push({name:"RouteForList",params:{title:e.title}});!1!==l.value.isValidState(s.value)?_(g.value,s.value):t.root.$toasted.show("Check field values",{type:"error",duration:3e3})};Object(d["i"])(I,function(e){e&&t.root.$toasted.show(e,{type:"error",duration:5e3})}),Object(d["i"])(L,function(n){n&&(t.root.$toasted.show(n.data,{type:"success",duration:3e3}),t.root.$router.push({name:"RouteForList",params:{title:e.title}}))});var F=function(){t.root.$router.push({name:"RouteForList",params:{title:e.title}})};return{loading:r,error:a,dto:s,schematool:l,copydto:c,editFields:f,formTitle:y,validFeedback:x,invalidFeedback:O,onOK:P,onCancel:F,getState:k,apiIndexFromTitle:b}},beforeRouteUpdate:function(e,t,n){this.apiIndex=this.apiIndexFromTitle(e.params.title),n()},beforeRouteEnter:function(e,t,n){n(function(t){return t.apiIndex=t.apiIndexFromTitle(e.params.title)})}},se=ie,le=Object(S["a"])(se,oe,re,!1,null,null,null),ce=le.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("b-nav",{attrs:{tabs:"","content-class":"mt-3"}},e._l(e.dtoList,function(t,o){return n("b-nav-item",{key:o,attrs:{"exact-active-class":"active",active:e.$route.path.includes(t),to:{name:"RouteForList",params:{title:t}},title:t}},[e._v("\n      "+e._s(t)+"\n    ")])}),1),n("router-view")],1)},de=[],pe={name:"NavDatabase",props:{},setup(e,t){const{dtoList:n}=L(t);return{dtoList:n}}},fe=pe,ve=Object(S["a"])(fe,ue,de,!1,null,null,null),me=ve.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("The blog posts are loaded automatically when you scroll to end, 10 per time. Credits to  "),n("b-link",{attrs:{href:"https://github.com/LinusBorg/composition-api-demos",target:"_blank"}},[e._v("composition.api-demos.")])],1),n("div",{staticClass:"flex flex-col items-center text-left"},e._l(e.posts,function(e,t){return n("article",{key:t},[n("Post",{attrs:{post:e}})],1)}),0)])},be=[],he=n("75fc");function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(d["h"])(e),n=t.perPage,o=void 0===n?Object(d["g"])(10):n,r=t.total,a=void 0===r?Object(d["g"])(null):r,i=t.startPage,s=void 0===i?1:i,l=Object(d["g"])(s),c=Object(d["a"])(function(){return l.value}),u=Object(d["a"])(function(){return a.value?Math.ceil(a.value/o.value):null}),p=Object(d["a"])(function(){return Math.min((c.value-1)*o.value,a.value)}),f=function(e){"number"===typeof e&&(l.value=xe(e,1,u.value))},v=function(){return f(c.value-1)},m=function(){return f(c.value+1)},g=function(){return f(1)},b=function(){return f(u.value)};return Object(d["i"])([a,o],function(){l.value>u.value&&(l.value=u.value)},{lazy:!0}),{perPage:o,total:a,currentPage:c,lastPage:u,offset:p,next:m,prev:v,first:g,last:b,set:f}}function xe(e,t,n){return e<t?t:e>n?n:e}var we=n("517b"),Oe=function(e){return Object(d["c"])(e)?e.value:e};function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(d["g"])(document),t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;e=Oe(e);var o=function(){return e&&e.removeEventListener(t,n)};return Object(d["e"])(function(){return e&&e.addEventListener(t,n)}),Object(d["d"])(o),o}function je(e){var t,n;e?(t=Object(d["g"])(e.value),n=e.value):(t=Object(d["g"])(window),n=document.documentElement);var o=Object(d["g"])(null),r=Object(d["g"])(null),a=Object(we["a"])(function(){o.value=n.scrollTop,r.value=n.scrollLeft},50),i=ke(t,"scroll",a);return{scrollX:r,scrollY:o,remove:i}}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=je(),o=n.scrollY;Object(d["i"])(o,function(n,o){if(!(n<o)){var r=document.documentElement.scrollHeight-(window.innerHeight+n)<t;r&&e()}})}var Le="https://jsonplaceholder.typicode.com/posts";function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=void 0===t?0:t,o=e.limit,r=void 0===o?5:o;return Pe(u.a.get(Le,{params:{_start:n,_limit:r}}))}var _e={get:Te};function Pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise(function(n){return setTimeout(function(){return n(e)},t)})}var Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"post max-w-2xl border border-gray-200 rounded-sm shadow mb-4 p-3"},[n("h2",{staticClass:"text-teal-500 font-bold fot-serif text-xl"},[e._v(e._s(e.post.title))]),n("hr",{staticClass:"text-gray-600 mb-2"}),n("p",{staticClass:"text-xs text-gray-500 mb-3"},[e._v("by User "+e._s(e.post.userId))]),n("p",[e._v("\n    "+e._s(e.post.body)+"\n  ")])])},Se=[],Ae={name:"Post",props:{post:{type:Object,required:!0}}},Ce=Ae,$e=Object(S["a"])(Ce,Fe,Se,!1,null,"7444f5dc",null),Me=$e.exports,Ee={name:"BlogPosts",components:{Post:Me},setup:function(){var e=Object(d["f"])([]),t=ye({perPage:9});t.total.value=100;var n=function(e,t){return _e.get({start:e,limit:t})},o=w(n),r=o.loading,a=o.error,i=o.result,s=o.use;function l(){!r.value&&t.next()}return Object(d["i"])(t.currentPage,function(){s(t.offset.value,t.perPage.value)}),Object(d["i"])(i,function(t){t&&e.push.apply(e,Object(he["a"])(t.data))}),Ie(l,150),{currentPage:t.currentPage,error:a,loading:r,next:l,posts:e}}},Ne=Ee,De=Object(S["a"])(Ne,ge,be,!1,null,"6028b38f",null),Re=De.exports;o["default"].use(D["a"]);var Be=new D["a"]({mode:"history",routes:[{path:"",name:"Home",components:{default:H,main:H}},{path:"/",redirect:""},{path:"/Database",components:{default:me,main:me},children:[{path:"",name:"defaultRouteForList",component:ne},{path:":title",name:"RouteForList",component:ne},{path:":title/:id",name:"RouteForSingle",component:ce,props:qe}]},{path:"/Blog",name:"BlogPosts",components:{default:Re,main:Re}},{path:"/About",name:"About",components:{default:Q,main:Q}},{path:"/*",redirect:{name:"Home"}}]});function qe(e){var t=e.params.id,n=e.params.title;return"number"!==typeof t&&(t=Number(t)),{id:t,title:n}}var Ge=n("2f62");o["default"].use(Ge["a"]);var ze=new Ge["a"].Store({state:{apiIndex:0,loggedIn:!1},mutations:{setApiIndex:function(e,t){e.apiIndex=t},setLoggedIn:function(e,t){e.loggedIn=t}},actions:{},modules:{}}),He=n("5f5b"),Ue=(n("f9e3"),n("2dd8"),n("ecee")),Ve=n("c074"),Ye=n("ad3d"),Je=n("a65d"),Ke=n.n(Je),Qe=n("6233"),We=function(){function e(){var t=this;Object(p["a"])(this,e),this.appConfig={b2cScopes:["https://oteohjelmistot.onmicrosoft.com/api/Database.CRUD"]},this.loginRequest={scopes:this.appConfig.b2cScopes},this.tokenRequest={scopes:this.appConfig.b2cScopes},this.msalConfig={auth:{clientId:"f612602a-9c45-4f0f-b7b7-e18b0f9430b5",authority:"https://oteohjelmistot.b2clogin.com/oteohjelmistot.onmicrosoft.com/b2c_1_otev2",validateAuthority:!1,redirectUri:"https://vuewithnetcore.azurewebsites.net",postLogoutRedirectUri:"https://vuewithnetcore.azurewebsites.net",navigateToLoginRequestUrl:!1},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!0}},console.log("Initializing AuthService"),this.email=Object(d["g"])(""),this.loggedIn=Object(d["g"])(!1),this.toggleLoginText=Object(d["a"])(function(){return t.loggedIn.value?"Sign out ".concat(t.email.value):"Sign in"}),this.app=new Qe["a"](this.msalConfig)}return Object(f["a"])(e,[{key:"getToken",value:function(e){var t=this;return console.log("getting jwt token..."),new Promise(function(n,o){t.app.acquireTokenSilent(t.tokenRequest).then(function(o){t.setLoggedIn(!0,e,o),n(o)}).catch(function(r){console.log("fallback to interaction when silent call fails",r),t.app.acquireTokenPopup(t.tokenRequest).then(function(o){t.setLoggedIn(!0,e,o),n(o)}).catch(function(n){t.setLoggedIn(!1,e),o(n)})})})}},{key:"setLoggedIn",value:function(e,t,n){this.loggedIn.value=e,t.$store.commit("setLoggedIn",e),this.email.value="",e&&(console.log("token acquired:",n),n.idToken.claims.hasOwnProperty("emails")&&n.idToken.claims.emails.length>0&&(this.email.value=n.idToken.claims.emails[0]),console.log("logged in as ",this.email.value))}},{key:"checkLoggedIn",value:function(e){var t=this;return console.log("checkLoggedIn",e),new Promise(function(n,o){t.app.acquireTokenSilent(t.tokenRequest).then(function(o){t.setLoggedIn(!0,e,o),n(o)}).catch(function(n){t.setLoggedIn(!1,e),console.log("failed to acquire token silently -> not logged in"),o(n)})})}},{key:"ensureLoggedIn",value:function(e){var t=this;return new Promise(function(n,o){t.checkLoggedIn(e).then(function(e){n(e)}).catch(function(){var r="You need to be signed in to perform this operation. Do you want to sign in now?";e.$bvModal.msgBoxConfirm(r,{title:"Sign in"}).then(function(r){!0===r&&t.login(e).then(function(e){n(e)}).catch(function(e){o(e)})}).catch(function(e){o(e)})})})}},{key:"login",value:function(e){var t=this;return new Promise(function(n,o){t.app.loginPopup().then(function(r){console.log("loginPopup, loginResponse",r),t.getToken(e).then(function(e){console.log("token aquired after login, tokenresponse:",e),n("You are signed in as ".concat(t.email.value))}).catch(function(e){console.log("loginResponseError in loginPopup:",e),o(new Error("Login failed: ".concat(e.message)))})}).catch(function(e){console.log("loginResponseError getToken:",e),o(new Error("Login failed: ".concat(e.message)))})})}},{key:"logout",value:function(e){return this.app.logout(),this.setLoggedIn(!1,e),"You are signed out"}},{key:"toggleLogin",value:function(e){var t=this;return new Promise(function(n,o){t.checkLoggedIn(e).then(function(){n(t.logout(e))}).catch(function(){t.login(e).then(function(e){n(e)}).catch(function(e){o(e)})})})}}]),e}();o["default"].use(d["b"]),o["default"].use(He["a"]),Ue["c"].add(Ve["a"]),Ue["c"].add(Ve["c"]),Ue["c"].add(Ve["b"]),o["default"].component("font-awesome-icon",Ye["a"]);var Xe={action:{text:"Close",onClick:function(e,t){t.goAway(0)}},position:"top-center",type:"info",theme:"outline",duration:4e3};o["default"].use(Ke.a,Xe),o["default"].prototype.$AuthService=new We,o["default"].config.productionTip=!1,new o["default"]({router:Be,store:ze,render:function(e){return e(N)}}).$mount("#app")},"64a9":function(e,t,n){},c2cb:function(e,t,n){},c680:function(e,t,n){e.exports=n.p+"img/azure.d084b753.png"}});
//# sourceMappingURL=app.11ddd030.js.map